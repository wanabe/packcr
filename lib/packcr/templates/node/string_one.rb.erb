if (
  refill_buffer(1) < 1 ||
  @buffer[@cur] != "<%= Packcr.escape_character(value[0]) %>"
)
  throw(<%= onfail %>)
end
<%- if gen.location -%>
@cur_loc.forward(@buffer, @cur, 1)
<%- end -%>
@cur += 1
