1.times do |;pos, q, capt, p_loc, q_loc|
  pos = @cur
  <%- if gen.location -%>
  p_loc = @cur_loc
  <%- end -%>
  <%- r, code = gen.generate_code_str(expr, onfail, 2, false) -%>
  <%- %><%= code -%>
  q = @cur
  capt = chunk.capts[<%= index %>]
  capt.range_start = pos
  capt.range_end = q
  <%- if gen.location -%>
  q_loc = @cur_loc
  capt.range_start = p_loc
  capt.range_end = q_loc
  <%- end -%>
end
