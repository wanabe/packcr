<%- if index != nil -%>
if (!RTEST(pcc_apply_rule(ctx, pcc_evaluate_rule_<%= name %>, rb_ivar_get(chunk->robj, rb_intern("@thunks")), &(chunk->values.buf[<%= index %>])))) goto L<%= "%04d" % onfail %>;
<%- else -%>
if (!RTEST(pcc_apply_rule(ctx, pcc_evaluate_rule_<%= name %>, rb_ivar_get(chunk->robj, rb_intern("@thunks")), NULL))) goto L<%= "%04d" % onfail %>;
<%- end -%>
