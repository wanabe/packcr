<%- if a -%>
if (
    pcc_refill_buffer(ctx, 1) < 1 ||
    RSTRING_PTR(rb_ivar_get(ctx->robj, rb_intern("@buffer")))[NUM2SIZET(rb_ivar_get(ctx->robj, rb_intern("@cur")))] == '<%= Packcr.escape_character(charclass[i]) %>'
) goto L<%= "%04d" % onfail %>;
<%- if gen.location -%>
    pcc_location_forward(&ctx->cur_loc, RSTRING_PTR(rb_ivar_get(ctx->robj, rb_intern("@buffer"))) + NUM2SIZET(rb_ivar_get(ctx->robj, rb_intern("@cur"))), 1);
<%- end -%>
rb_ivar_set(ctx->robj, rb_intern("@cur"), SIZET2NUM(NUM2SIZET(rb_ivar_get(ctx->robj, rb_intern("@cur"))) + 1));
<%- else -%>
if (
    pcc_refill_buffer(ctx, 1) < 1 ||
    RSTRING_PTR(rb_ivar_get(ctx->robj, rb_intern("@buffer")))[NUM2SIZET(rb_ivar_get(ctx->robj, rb_intern("@cur")))] != '<%= Packcr.escape_character(charclass[0]) %>'
) goto L<%= "%04d" % onfail %>;
<%- if gen.location -%>
    pcc_location_forward(&ctx->cur_loc, RSTRING_PTR(rb_ivar_get(ctx->robj, rb_intern("@buffer"))) + NUM2SIZET(rb_ivar_get(ctx->robj, rb_intern("@cur"))), 1);
<%- end -%>
rb_ivar_set(ctx->robj, rb_intern("@cur"), SIZET2NUM(NUM2SIZET(rb_ivar_get(ctx->robj, rb_intern("@cur"))) + 1));
<%- end -%>
